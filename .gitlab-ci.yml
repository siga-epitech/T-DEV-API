stages:
  - trigger_devops
  - trigger_dev
  - trigger_prod

# Trigger le pipeline dans le projet DevOps (Dev)
trigger_devops_dev:
  stage: trigger_dev
  trigger:
    project: "t-dev.epitest.eu/718"  # Remplacez par la variable d'environnement pour l'ID du projet
    branch: "dev"
    strategy: depend
    variables:
      ENVIRONMENT: "dev"
  only:
    - dev

# Trigger le pipeline dans le projet DevOps (Prod)
trigger_devops_prod:
  stage: trigger_prod
  trigger:
    project: "t-dev.epitest.eu/718"  # Remplacez par la variable d'environnement pour l'ID du projet
    branch: "prod"
    strategy: depend
    variables:
      ENVIRONMENT: "prod"
  only:
    - prod

# Trigger le pipeline dans le projet DevOps (avec feature sp√©cifique)
trigger_devops_pipelines:
  stage: trigger_devops
  trigger:
    project: "t-dev.epitest.eu/718"  # Remplacez par la variable d'environnement pour l'ID du projet
    branch: "feature/docker-configuration-siga"
    strategy: depend
    variables:
      ENVIRONMENT: "prod"
  only:
    - feature/ci-config
